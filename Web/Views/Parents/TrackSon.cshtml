
@{
    ViewBag.Title = "TrackSon";
    Layout = "~/Views/Shared/ParentLayou.cshtml";
}

<div class="main text-center ">
    <div class="row mt-5 d-flex justify-content-center ">

        <div class="col-md-8 mt-3 ">

            <div class="input-group">
                <select class="custom-select" id="inputGroupSelect04">
                    <option selected">Choose Son...</option>
                    <option value="1">Ahmed</option>
                    <option value="2">Sara</option>
                    <option value="3">Abdallah</option>
                </select>

                <div class="input-group-append">
                    <button id="" class="btn btn-outline-success" type="button" onclick="showPosition();">Track Son Bus</button>
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center mt-3 ml-1">
        <div id="embedMap" style="width: 910px; height: 420px;">
            <!--Google map will be embedded here-->
        </div>

    </div>

</div>

<!-- ------------------------------ -->

<script     src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-IzodG1DGrievRZKQeIV60DKHcrVXBsA&callback=initMap"></script>
<script>
        function showPosition() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showMap, showError);
            } else {
                alert("Sorry, your browser does not support HTML5 geolocation.");
            }
        }

        // Define callback function for successful attempt
        function showMap(position) {
            // Get location data
            lat = 29.955104;
            long = 30.913497;
            var latlong = new google.maps.LatLng(lat, long);

            var myOptions = {
                center: latlong,
                zoom: 14,
                mapTypeControl: true,
                navigationControlOptions: {
                    style: google.maps.NavigationControlStyle.SMALL
                }
            }

            var map = new google.maps.Map(document.getElementById("embedMap"), myOptions);
            var marker = new google.maps.Marker({ position: latlong, map: map, title: "You are here!" });
        }

        // Define callback function for failed attempt
        function showError(error) {
            if (error.code == 1) {
                result.innerHTML = "You've decided not to share your position, but it's OK. We won't ask you again.";
            } else if (error.code == 2) {
                result.innerHTML = "The network is down or the positioning service can't be reached.";
            } else if (error.code == 3) {
                result.innerHTML = "The attempt timed out before it could get the location data.";
            } else {
                result.innerHTML = "Geolocation failed due to unknown error.";
            }
        }
</script>

